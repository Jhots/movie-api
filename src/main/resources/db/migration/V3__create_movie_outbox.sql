CREATE TABLE MOVIE_OUTBOX
(
    OUTBOX_ID          NUMBER(24,0) GENERATED BY DEFAULT ON NULL AS IDENTITY START WITH 1 INCREMENT BY 1 MINVALUE 0 NOMAXVALUE NOT NULL,
    OUTBOX_EVENT_TYPE  VARCHAR2(100) NOT NULL,
    OUTBOX_PAYLOAD     CLOB NOT NULL,
    OUTBOX_CREATED_AT  TIMESTAMP NOT NULL,
    OUTBOX_PROCESSED   NUMBER(1,0) DEFAULT 0 NOT NULL,
    CONSTRAINT MOVIE_OUTBOX_PK PRIMARY KEY (OUTBOX_ID)
);

COMMENT ON TABLE MOVIE_OUTBOX IS '[NOT_SECURITY_APPLY] Table to store event outbox information for the movie system';
COMMENT ON COLUMN MOVIE_OUTBOX.OUTBOX_ID IS '[NOT_SECURITY_APPLY] Primary key identifier for internal database queries';
COMMENT ON COLUMN MOVIE_OUTBOX.OUTBOX_EVENT_TYPE IS '[NOT_SECURITY_APPLY] Field used to store the type of event';
COMMENT ON COLUMN MOVIE_OUTBOX.OUTBOX_PAYLOAD IS '[NOT_SECURITY_APPLY] Field used to store the payload for the event';
COMMENT ON COLUMN MOVIE_OUTBOX.OUTBOX_CREATED_AT IS '[NOT_SECURITY_APPLY] Field used to store the timestamp of when the event was created';
COMMENT ON COLUMN MOVIE_OUTBOX.OUTBOX_PROCESSED IS '[NOT_SECURITY_APPLY] Field used to store if the event has been processed or not (0 = false, 1 = true)';

CREATE INDEX MOVIE_OUTBOX_IDX01 ON MOVIE_OUTBOX (OUTBOX_EVENT_TYPE);
CREATE INDEX MOVIE_OUTBOX_IDX02 ON MOVIE_OUTBOX (OUTBOX_PROCESSED);